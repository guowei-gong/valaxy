---
title: ä½è¿ç®—ç¬¦ä¼˜åŒ–è®¡æ•°ç¨‹åº
date: 2022-11-08 10:59:30
tags: 
    - ç®—æ³•
    - Leetcode
categories: ç®—æ³•è™æˆ‘åƒç™¾éï¼Œæˆ‘å¾…ç®—æ³•å¦‚åˆæ‹
---

å·§å¦™çš„é€šè¿‡æ•´æ•°ï¼Œæ¥è¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°è¿‡å“ªäº›å­—ç¬¦

# æ€è·¯
## æ€è·¯ä¸€
é€šè¿‡æ•°ç»„è®°å½• `allowed` ä¸­çš„å­—ç¬¦ï¼Œéå† `words` å­—ç¬¦ä¸²æ•°ç»„ï¼Œè·å–æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­è¯¥å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œæ˜¯å¦åœ¨ `allowed` ä¸­å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¿”å›ç»“æœåŠ ä¸€ã€‚
## æ€è·¯äºŒ
é€šè¿‡æ•´æ•°ï¼Œæ¥è¡¨ç¤ºæ¯ä¸ªå­—ç¬¦ä¸²ä¸­å‡ºç°è¿‡å“ªäº›å­—ç¬¦ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²è½¬æ¢å¾—åˆ°çš„æ•´æ•°ï¼Œä¸ `allowed` è½¬æ¢å¾—åˆ°çš„æ•´æ•°æ˜¯å¦ç›¸åŒï¼Œç›¸åŒè¿”å›ç»“æœåŠ ä¸€ã€‚

# è§£é¢˜æ–¹æ³•
## æ€è·¯ä¸€
ç•¥
## æ€è·¯äºŒ
> ä½ å¯ä»¥å…ˆè·³è¿‡è§£é¢˜æ–¹æ³•ï¼Œçœ‹ä»£ç ï¼Œå¦‚æœæ— æ³•ç†è§£ï¼Œå†å›è¿‡å¤´æ¥çœ‹çœ‹è§£é¢˜æ–¹æ³•ã€‚

```Go []
var s string
s := ab

f := func(w string) (mask int) {
		for _, c := range w {
			// mask |= 1 << (c - 'a') åˆ†è§£ä¸ºå¦‚ä¸‹ä¸‰æ­¥
			tmp := c - 'a'
			left := 1 << tmp
			mask = (left | mask) + mask
		}
		return
	}

mask := f(s)
```
`tmp := c - 'a'`ï¼Œ`c` å˜é‡æ˜¯ `int32` ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦ã€‚`c - 'a'`ï¼Œæ ¹æ® ASCII ç è¡¨ï¼Œ`a = 97`ï¼Œé‚£ä¹ˆå®é™…ä¸Šæ˜¯`tmp = 97 - 97 // output: 0`ï¼Œé€šè¿‡å·¦ç§»è¿ç®—ç¬¦ `<<`ï¼Œ`left := 1 << 0 // output: 1`ï¼Œæœ€å `mask = (1 | 0) + 0 // output: 1`ã€‚

> ğŸ‰ å°è´´å£«ï¼šä»€ä¹ˆæ˜¯`<<` å·¦ç§»è¿ç®—ç¬¦ï¼Ÿ
> ä¾‹å¦‚ A << 3ï¼ŒA = 60
> çœ‹åˆ° A << 3ï¼Œæ ¹æ® `<<`ï¼ŒæŠŠå¼å­çœ‹åšå·¦ã€å³ä¸¤ä¸ªéƒ¨åˆ†ã€‚å·¦è¾¹ï¼Œè¢«å·¦ç§»çš„æ•°å­—ï¼›å³è¾¹ï¼Œå†³å®šå·¦è¾¹çš„æ•°å­—ç§»å¤šå°‘ã€‚
> 3 åˆ™ä»£è¡¨ 3 ä½ã€‚A åˆ™å˜ä¸º 480ï¼Œå› ä¸º `A = 60` => `A = 60 x 2 çš„ 3 æ¬¡æ–¹` => `A = 60 x 8 = 480`ã€‚

æ¥ç€å¾ªç¯ï¼Œæœ€åå°±å¯ä»¥å¾—åˆ°å­—ç¬¦ä¸² `s` ä¸º 3ï¼Œä½ å¯ä»¥è‡ªå·±æ¨æ¼”ä¸€éã€‚

å‡å¦‚ç°åœ¨`s := aaab` å‘¢ï¼Ÿç­”æ¡ˆä»ç„¶æ˜¯ 3ï¼Œä¸ºä»€ä¹ˆï¼Ÿå› ä¸º `|` ä½æˆ–è¿ç®—ç¬¦ï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªç›¸åŒçš„äºŒè¿›åˆ¶æ•°ï¼Œä¸ç®¡ `|` å¤šå°‘æ¬¡ï¼Œç»“æœä»ä¸å˜ï¼Œä¾‹å¦‚ï¼š
```Go []
a := 1
fmt.Println(strconv.FormatInt(int64(a), 2)) // output: 01ï¼Œè¿™æ˜¯ a çš„äºŒè¿›åˆ¶
b := 2
fmt.Println(strconv.FormatInt(int64(b), 2)) // output: 10
c := a | b
fmt.Println("ans:", ans) // output: 3
fmt.Println(strconv.FormatInt(int64(ans), 2)) // output: 11ã€‚
// ä¸ºä»€ä¹ˆ c ç­‰äº 3ï¼Ÿ
// å› ä¸º 01 | 10 -> 11 -> 11 çš„åè¿›åˆ¶ -> 3
```
å›åˆ°æˆ‘ä»¬çš„ä¾‹å­ `s := aaab`ï¼Œå°† `a` è½¬åŒ–ä¸ºæ•´æ•° 97ï¼Œæˆ‘ä»¬å°†å®ƒå‡å» 97ï¼Œè¾“å‡º 0ï¼ˆè¿™æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä» 0 å¼€å§‹è®¡ç®—ï¼Œå³ `è¾“å…¥çš„å­—ç¬¦ - 'a'`ï¼Œä¸å‡å» 97ï¼Œå³ä¸å‡ a ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯è¡¨ç¤º 26 ä¸ªè‹±æ–‡å­—æ¯ï¼Œæ˜¯ä» 0 ~ 26 æ–¹ä¾¿ç†è§£ï¼Œè¿˜æ˜¯ 97 ~ 123 å‘¢ï¼‰ï¼Œ1 å·¦ç§» 0 ä½åä¸º 1ï¼Œ1 çš„äºŒè¿›åˆ¶è¡¨è¾¾ä¸º 1ï¼Œæˆ‘ä»¬ `mask = mask | left + mask => 0 | 1 + 0 => 1`ï¼Œæ­¤æ—¶ `s` åé¢çš„å­—ç¬¦ä¸²ï¼Œä¸ç®¡æœ‰å¤šå°‘ä¸ª aï¼Œæœ€åéƒ½æ˜¯ ` 1 | 1`ï¼Œé‚£è¯´æ˜å¤šä¸ªåŒæ ·çš„å­—ç¬¦ï¼Œé™¤äº†ç¬¬ä¸€æ¬¡ä» 0 å€¼å˜äº†ï¼Œåé¢ `mask` çš„ç»“æœéƒ½æ˜¯æ˜¯ä¸å˜çš„ã€‚

è¿™æ ·å°±å®Œæˆäº†**é€šè¿‡æ•´æ•°æ¥è¡¨ç¤ºå“ªäº›å­—ç¬¦å‡ºç°è¿‡**ã€‚

# æ—¶é—´å¤æ‚åº¦
æ€è·¯äºŒç›¸æ¯”æ€è·¯ä¸€ï¼Œæ—¶é—´å¤æ‚åº¦æ²¡æœ‰å˜åŒ–ï¼Œéƒ½æ˜¯ O(m)ï¼Œm ä¸ºæ‰€æœ‰å­—ç¬¦ä¸²çš„æ€»é•¿åº¦ã€‚
ç©ºé—´å¤æ‚åº¦ï¼Œå‰è€…ä¸º O(C)ï¼ŒC ä¸º allowed å­—ç¬¦é›†çš„å¤§å°ï¼Œåè€…ä¸º O(1)ã€‚

# Code
## æ€è·¯ä¸€
```Go []
func countConsistentStrings(allowed string, words []string) (ans int) {
	s := [26]bool{}
	for _, c := range allowed {
		s[c-'a'] = true
	}
	
	check := func(w string) bool {
		for _, c := range w {
			if !s[c-'a'] {
				return false
			}
		}
		return true
	}
	
	for _, w := range words {
		if check(w) {
			ans++
		}
	}
	
	return ans
}
```
## æ€è·¯äºŒ
```Go []
func countConsistentStrings(allowed string, words []string) (ans int) {
	f := func(w string) (mask int) {
		for _, c := range w {
			mask |= 1 << (c - 'a')
		}
		return 
	}
	
	mask := f(allowed)
	for _, w := range words {
		if (mask | f(w)) == mask {
			ans++
		}
	}
	return
}
```

# å¼•ç”¨
æ„Ÿè°¢ [@ylb](https://leetcode.cn/u/lcbin/) æä¾›çš„è§£é¢˜æ€è·¯ã€‚ä»–çš„[é¢˜è§£é“¾æ¥](https://leetcode.cn/problems/count-the-number-of-consistent-strings/solutions/1955937/by-lcbin-2w0y/)ã€‚